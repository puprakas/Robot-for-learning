<!DOCTYPE html>
<html lang="en">
	<head>
		<title>New Media Lab</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous"/>
		<link rel="stylesheet" href="../styles/style.css" >
		<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet">
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	</head>
	<body>
		<div class="curtain">
			<div class="container">
				<div class="menu-board main-board">
					<div class="caption-bg">
						<h5>New Media Lab</h5>
						<h3>Robots for Education</h3>
					</div>
				</div>
				<div class="d-flex justify-content-around align-items-stretch mt-5">
					<div class="menu-board sub-board">
						<div class='menu-header'>Pattern</div>
						<input type="radio" id="flag" name="image_select" value="Flag" checked="true">
						<label for="flag">Flag</label><br>
						<input type="radio" id="fruit" name="image_select" value="Fruit">
						<label for="fruit">Fruit</label><br>
						<input type="radio" id="flower" name="image_select" value="Flower">
						<label for="flower">Flower</label><br>
						<input type="radio" id="lion" name="image_select" value="Lion">
						<label for="lion">Lion</label><br>
						<input type="radio" id="rainbow" name="image_select" value="Rainbow">
						<label for="rainbow">Rainbow</label><br>
					</div>
					<div class="menu-board sub-board">
						<div class='menu-header'>Difficulty</div>
						<input type="radio" id="easy" name="difficulty" value="Easy" checked="true">
						<label for="easy">Easy</label><br>
						<input type="radio" id="normal" name="difficulty" value="Normal">
						<label for="normal">Normal</label><br>
						<input type="radio" id="hard" name="difficulty" value="Hard">
						<label for="hard">Hard</label><br>
					</div>
				</div>
				<div class="d-flex justify-content-around align-items-stretch mt-5">
					<div class="menu-board sub-board">
						<div class='menu-header'>Languages</div>
						<div class='d-flex justify-content-around'>
							<div id='flag-1' class='flag-div'>
								<div id='x-icon-1'><div class='flag-icon uk-icon'></div></div>
								<div id='flag-icon-1' class='flag-icon uk-icon'></div>
							</div>
							<div id='flag-2' class='flag-div'>
								<div id='x-icon-2'><div class='flag-icon nl-icon'></div></div>
								<div id='flag-icon-2' class='flag-icon nl-icon'></div>
							</div>
						</div>
					</div>					
					<div class="start-div">
						<div class="start-btn">Start</div>
					</div>
				</div>
			</div>
			<div class="gear-area">
				<div class="gear gear-l rotating"></div>
				<div class="gear gear-sm rotating-rev"></div>
			</div>
		</div>
	</body>
	<footer>
		<script type="text/javascript">
			$('.curtain').fadeIn(2000)
			var f_counter = 2
			$('#flag-1').click(function() {
				$('#flag-1').fadeOut(400, function() {
					if ($('#x-icon-1').css('display') == 'none') {						
						$('#x-icon-1').css('display', 'flex')
						$('.uk-icon').css('display', 'block')
						$('.uk-icon').css('opacity', '0.4')
						$('#flag-icon-1').css('display', 'none')
						if (f_counter == 1) {
							$('#flag-2').trigger( "click" );
						}
						f_counter--
					}
					else {						
						$('#x-icon-1').css('display', 'none')
						$('.uk-icon').css('display', 'block')
						$('.uk-icon').css('opacity', '1')
						$('#flag-icon-1').css('display', 'block')
						f_counter++
					}
					$('#flag-1').fadeIn(400)
				})
			})
			$('#flag-2').click(function() {
				$('#flag-2').fadeOut(400, function() {
					if ($('#x-icon-2').css('display') == 'none') {						
						$('#x-icon-2').css('display', 'flex')
						$('.nl-icon').css('display', 'block')
						$('.nl-icon').css('opacity', '0.4')
						$('#flag-icon-2').css('display', 'none')
						if (f_counter == 1) {
							$('#flag-1').trigger( "click" );
						}
						f_counter--
					}
					else {						
						$('#x-icon-2').css('display', 'none')
						$('.nl-icon').css('display', 'block')
						$('.nl-icon').css('opacity', '1')
						$('#flag-icon-2').css('display', 'block')
						f_counter++
					}
					$('#flag-2').fadeIn(400)
				})
			})
			function getLanguageOptionId() {
				let bool1 = !($('#flag-icon-1').css('display') == 'none')
				let bool2 = !($('#flag-icon-2').css('display') == 'none')
				if(bool1 && bool2)
					return 0
				return bool1 ? 1 : 2
			}
			function getDifficultyId(x){
				switch(x){
					case 'easy': 
						return 0;
					case 'normal': 
						return 1;
					case 'hard': 
						return 2;
				}
			}
			function getImageId(x){
				switch(x){
					case 'flag': 
						return 0;
					case 'fruit': 
						return 1;
					case 'flower': 
						return 2;
					case 'lion': 
						return 3;
					case 'rainbow': 
						return 4;
				}
			}
			$(".start-btn").click(() => {
				var mode, level;
				$('input[name$="image_select"]').each( function () { this.checked ? mode = this.value : null })
				$('input[name$="difficulty"]').each( function () { this.checked ? level = this.value : null })
				$('.curtain').fadeOut(2000, () => {
					window.location.href = 'game.html?mode='
						+getImageId(mode.toLowerCase())
						+'&level='+getDifficultyId(level.toLowerCase())
						+'&lang='+getLanguageOptionId();
				});
			})
		</script>
	</footer>
</html>